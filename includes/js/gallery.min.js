jQuery(document).ready(function(a){let fileFrame=null;let handleRemoveClick=function(b){b.preventDefault();a(this).parents(".gallery-item").remove()};let insertGalleryImage=function(b,c){try{let attachment=b.toJSON();let $size=a(c).data("image-size");let img=document.createElement("img");if("undefined"!==typeof attachment.sizes[$size]){img.setAttribute("src",attachment.sizes[$size]["url"]);img.setAttribute("width",attachment.sizes[$size]["width"]);img.setAttribute("height",attachment.sizes[$size]["height"])}else{img.setAttribute("src",attachment.url);img.setAttribute("width","300");img.setAttribute("height","200")}img.setAttribute("class","gallery-item-image");img.setAttribute("title",attachment.name);let remove=document.createElement("span");remove.setAttribute("class","gallery-item-remove");remove.setAttribute("title",a(c).data("remove-label"));a(remove).click(handleRemoveClick);let input=document.createElement("input");input.setAttribute("type","hidden");input.setAttribute("name",a(c).data("name"));input.setAttribute("value",attachment.id);let wrapper=document.createElement("div");wrapper.setAttribute("class","gallery-item");wrapper.appendChild(img);wrapper.appendChild(remove);wrapper.appendChild(input);let gallery=document.getElementById(a(c).data("target-id"));gallery.appendChild(wrapper)}catch(d){console.log("could not add attachment");console.log(d);console.log(b)}};a(".gallery-item-remove").click(handleRemoveClick);a(".gallery-items-wrapper").sortable({handle:".gallery-item-image",placeholder:"gallery-item gallery-item-placeholder",forcePlaceholderSize:true}).disableSelection();a(".edit-gallery-button").click(function(b){b.preventDefault();let trigger=this;if(null===fileFrame){fileFrame=wp.media.frames.downloadable_file=wp.media({title:a(trigger).data("window-title"),button:{text:a(trigger).data("window-action")},multiple:true});fileFrame.on("select",function(){fileFrame.state().get("selection").map(function(c){insertGalleryImage(c,trigger)})});fileFrame.open()}else{fileFrame.open()}})});